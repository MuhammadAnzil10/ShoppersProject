<%- include('../layout/adminHeader') %>
        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Order Management </h2>
                </div>
                
            </div>
            <div class="card mb-4">
             <!-- card-header end// -->
                <div class="card-body">
                    <div class="table-responsive">
                        <table id="myTable" >
                            <thead>
                                <tr>
                                    <th scope="col">Date</th>
                                    <th scope="col" >User</th>
                                    <th scope="col">OrderId</th>
                                    <th scope="col">Total Price</th>
                                    <th scope="col">Payment Method</th>
                                    <th scope="col">Status</th>
                                    <th scope="col" style="width: 80px">Orders</th>
                                    
                                    
                                </tr>
                            </thead>
                            <tbody >
                                <% if(typeof orders !== 'undefined'){ %>

                                <% for(let i=0;i<orders.length;i++)
                                {  %>

                                
                                <tr>
                                    <td><%= orders[i].date %></td>
                                    <td style="color: red; width: 240px;"><%= orders[i].userId.name %></td>
                                    <td><%= orders[i]._id %></td>
                                    <td><%= orders[i].orderValue %></td>
                                    <td><%= orders[i].paymentMethod %></td>
                                    <td style="padding-left: 20px;" ><%= orders[i].orderStatus %></td>

                                    <% if(orders[i].cancellationStatus === 'Not requested' && orders[i].orderStatus==='Delivered' || orders[i].cancellationStatus==='Cancelled') { %>
                                    <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-primary">View </a></td>

                                    <%} else if(orders[i].cancellationStatus === 'Not requested' && orders[i].orderStatus==='Placed' ) { %>
                                        <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-primary"> View </a></td>
                                        
                                        <%} else if(orders[i].cancellationStatus === 'Accepted' && orders[i].orderStatus==='Placed' ) { %>
                                            <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-primary">View </a></td>

                                    <% } else if(orders[i].cancellationStatus === 'Not requested' && orders[i].orderStatus==='Confirm') { %>
                                        <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-primary">View </a></td>

                                        <% } else if(orders[i].cancellationStatus === 'Accepted' && orders[i].orderStatus==='Confirm') { %>
                                            <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-primary">View </a></td>

                                    <% } else if(orders[i].cancellationStatus === 'Requested') { %>
                                    <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-outline-danger">Cancel requested</a></td>

                                    <% } else if(orders[i].cancelledOrder && orders[i].orderStatus==='Delivered') { %>
                                        <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-outline-danger">Cancelled</a></td>

                                      <% } else if(orders[i].orderStatus==='Return requested') { %>
                                       <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-outline-danger">Requested</a></td>
                                       
                                     <% } else if(orders[i].orderStatus==='Returned') { %>
                                      <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-outline-danger">Returned</a></td>

                                      <% } else if(orders[i].cancellationStatus ==='Accepted' || orders[i].cancelledOrder) { %>
                                        <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-outline-danger">Returned</a></td>

                                        <% } else if(orders[i].orderStatus ==='Return accepted') { %>
                                            <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-outline-danger">Returned</a></td>

                                            <% } else if(orders[i].orderStatus ==='Pending') { %>
                                                <td><a href="/admin/order-view?id=<%= orders[i]._id%>" class="btn btn-outline-danger">View</a></td>

                                    <% } %>

                                    
                                       
                                </tr>
                           <% } %>

                           <% }else{ %>

                             <td>No Product in the list</td>

                         <%  }  %>

                            </tbody>
                        </table>
                    </div> <!-- table-responsive //end -->
                </div> <!-- card-body end// -->
            </div> <!-- card end// -->
        </section> <!-- content-main end// -->
        <footer class="main-footer font-xs">
            <div class="row pb-30 pt-15">
                <div class="col-sm-6">
                    <script data-cfasync="false" src="../../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
                    document.write(new Date().getFullYear())
                    </script>
                </div>
                <div class="col-sm-6">
                    <div class="text-sm-end">
                        All rights reserved
                    </div>
                </div>
            </div>
        </footer>
    </main>
    <script src="assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="assets/js/vendors/select2.min.js"></script>
    <script src="assets/js/vendors/perfect-scrollbar.js"></script>
    <script src="assets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="assets/js/main.js" type="text/javascript"></script>

<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/page-orders-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:33:22 GMT -->
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.0/jquery.dataTables.min.js"></script>
  
  <script>

    $(document).ready( function () {
        
        $('#myTable').DataTable();
    } );
  
    </script>
</body>
</html>